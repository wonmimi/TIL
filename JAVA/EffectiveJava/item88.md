# ì•„ì´í…œ 88. readObjectë©”ì„œë“œëŠ” ë°©ì–´ì ìœ¼ë¡œ ì‘ì„±í•˜ë¼

[ì•„ì´í…œ 50](https://github.com/chosun-dev/study-book-effective-java/blob/dev/8%EC%9E%A5/50_%EC%A0%81%EC%8B%9C%EC%97%90_%EB%B0%A9%EC%96%B4%EC%A0%81_%EB%B3%B5%EC%82%AC%EB%B3%B8%EC%9D%84%20_%EB%A7%8C%EB%93%A4%EB%9D%BC_%EC%A0%95%EC%9B%90%EB%AF%B8.md) ì—ì„œ ê°€ë³€ì¸ Date í•„ë“œì˜ ë¶ˆë³€ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ìƒì„±ìì™€ ì ‘ê·¼ìì—ì„œ Dateê°ì²´ë¥¼ ë°©ì–´ì  ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ì˜€ë‹¤
```java
public Period(Date start, Date end) {
    this.start = new Date(start.getTime());
    this.end   = new Date(end.getTime());
    ...
}
```
Priod í´ë˜ìŠ¤ë¥¼ `ê¸°ë³¸ ì§ë ¬í™”`ë¥¼ ì‚¬ìš©í•  ê²½ìš° ë¶ˆë³€ì‹ì„ ë³´ì¥í•˜ì§€ ëª»í•œë‹¤
  - `implements Serializable`ì„ ì¶”ê°€


### readObject ë©”ì„œë“œ
__ë§¤ê°œë³€ìˆ˜ë¡œ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ë°›ëŠ” ìƒì„±ì__ <br>

 â—ï¸ __ë¶ˆë³€ì„ ê¹¨ëœ¨ë¦´ ì˜ë„__ ë¡œ ë§Œë“¤ì–´ì§„ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìœ¼ë©´ ì •ìƒì ì¸ ë°©ë²•ìœ¼ë¡œëŠ” ë§Œë“¤ì–´ë‚¼ ìˆ˜ ì—†ëŠ” ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤

 - Ex) 
    ```java
    // ì •ìƒì ì¸ Period ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§ë ¬í™”í•œ í›„ì— ì˜ë„ì ìœ¼ë¡œ ìˆ˜ì •í•œ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼
        private static final byte[] serializedForm = {
                (byte)0xac, (byte)0xed, 0x00, 0x05, 0x73, 0x72, 0x00, 0x06,
                0x50, 0x65, 0x72, 0x69, 0x6f, 0x64, 0x40, 0x7e, (byte)0xf8,
                0x2b, 0x4f, 0x46, (byte) 0xc0, (byte) 0xf4, 0x02, 0x00, 0x02,
                ... ìƒëµ ...
                
        };

        public static void main(String[] args) {
            Period p = (Period) deserialize(serializedForm);
            System.out.println(p);
        }
    ```
    ê²°ê³¼
    ```
    Fri Jan 01 12:00:00 PST 1999 - Sun Jan 01 12:00:00 PST 1984
    ```

  `readObject` ë©”ì„œë“œê°€ ì‹¤ì§ˆì ìœ¼ë¡œ ë˜ë‹¤ë¥¸ public ìƒì„±ìì´ê¸° ë•Œë¬¸ì— ìƒì„±ìì™€ ë˜‘ê°™ì€ ìˆ˜ì¤€ìœ¼ë¡œ ì£¼ì˜ë¥¼ ê¸°ìš¸ì—¬ì•¼í•œë‹¤

## ë¶ˆë³€ì‹ì„ ë§Œì¡±í•˜ëŠ” ë°©ë²•
### ìœ íš¨ì„± ê²€ì‚¬
`readObject` ë©”ì„œë“œê°€ `defaultReadObject`ë¥¼ í˜¸ì¶œí•˜ê²Œ í•œ í›„ì— ì—­ì§ë ¬í™”ëœ ê°ì²´ê°€ ìœ íš¨í•œì§€ ê²€ì‚¬í•´ì•¼ í•œë‹¤. 
 - ìœ íš¨ì„± ê²€ì‚¬ì— ì‹¤íŒ¨í•œë‹¤ë©´ `InvalidObjectException`ì„ ë˜ì ¸ ì˜ëª»ëœ ì—­ì§ë ¬í™”ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ ë§‰ëŠ”ë‹¤

- ex) Period í´ë˜ìŠ¤
  ```java
  private void readObject(ObjectInputStream s) throws IOException, ClassNotFoundException {
      s.defaultReadObject();
      
      // ë¶ˆë³€ì‹ ë§Œì¡± ê²€ì‚¬
      if(start.compareTo(end) > 0) { ğŸ“Œ
        throw new InvalidObjectException(start + "ê°€ " + end + "ë³´ë‹¤ ëŠ¦ë‹¤.");
      }

      ...
  }
  ```

### private ê°€ë³€ìš”ì†Œë¥¼ ë°©ì–´ ë³µì‚¬
Period ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì‹œì‘ëœ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ ëì— Date í•„ë“œì˜ ì°¸ì¡°ë¥¼ ì¶”ê°€í•˜ì—¬ __ê°€ë³€ Period ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ë‚¼ ìˆ˜ ìˆë‹¤__
  - ê³µê²©ìê°€ ì—­ì§ë ¬í™”ë¥¼ í†µí•´ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ ëì˜ ì°¸ì¡° ê°’ì„ ì½ìœ¼ë©´ Periodì˜ Dateì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤
  - ì´ ì°¸ì¡°ë¥¼ ì´ìš©í•˜ì—¬ Dateë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆê²Œ ë˜ì–´ ë¶ˆë³€ì‹ì´ êº ì§„ë‹¤

```java
private void readObject(ObjectInputStream s) throws IOException, ClassNotFoundException {
    s.defaultReadObject();
    
    // ê°€ë³€ ìš”ì†Œë“¤ì˜ ë°©ì–´ì  ë³µì‚¬ë³¸ ìƒì„±
    start = new Date(start.getTime());  ğŸ“Œ
    end = new Date(end.getTime());  ğŸ“Œ
    
    if(start.compareTo(end) > 0) { 
      throw new InvalidObjectException(start + "ê°€ " + end + "ë³´ë‹¤ ëŠ¦ë‹¤.");
    }

    ...
}
```
- ê°ì²´ë¥¼ ì—­ì§ë ¬í™”í•  ë•ŒëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì œì–´í•˜ë©´ ì•ˆë˜ëŠ” ê°ì²´ ì°¸ì¡° í•„ë“œë¥¼ ëª¨ë‘ ë°˜ë“œì‹œ ë°©ì–´ì ìœ¼ë¡œ ë³µì‚¬í•´ì•¼ í•œë‹¤
  * readObjectì—ì„œëŠ” ë¶ˆë³€ í´ë˜ìŠ¤ ì•ˆì˜ ëª¨ë“  private ê°€ë³€ ìš”ì†Œë¥¼ ë°©ì–´ì ìœ¼ë¡œ ë³µì‚¬ í•´ì•¼í•œë‹¤
- `final` í•„ë“œëŠ” ë°©ì–´ì  ë³µì‚¬ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹ˆ ì´ë¥¼ ì œê±°í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤

## ê¸°ë³¸ readObject ì‚¬ìš©
- `transient` í•„ë“œë¥¼ ì œì™¸í•œ ëª¨ë“  í•„ë“œì˜ ê°’ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ ìœ íš¨ì„± ê²€ì‚¬ ì—†ì´ public ìƒì„±ìì— ì¶”ê°€í•´ë„ ê´œì°®ë‹¤ ?
  * O : ê¸°ë³¸ readObject ë©”ì„œë“œ ì‚¬ìš©
  * X : ì»¤ìŠ¤í…€ readObject ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ ìœ íš¨ì„± ê²€ì‚¬ì™€ ë°©ì–´ì  ë³µì‚¬ ìˆ˜í–‰
- `ì§ë ¬í™” í”„ë¡ì‹œ íŒ¨í„´`(ì•„ì´í…œ 90)ì„ ì‚¬ìš©í•´ë„ ëœë‹¤ (ê¶Œì¥)
  * ì—­ì§ë ¬í™”ë¥¼ ì•ˆì „í•˜ê²Œ ë§Œë“œëŠ” ë° í•„ìš”í•œ ë…¸ë ¥ì„ ì¤„ì—¬ì¤€ë‹¤

## ì •ë¦¬
> - ì•ˆì „í•œ readObject ë©”ì„œë“œ ì‘ì„± ì§€ì¹¨
>   *  private ì´ì—¬ì•¼ í•˜ëŠ” ê°ì²´ ì°¸ì¡° í•„ë“œëŠ” ê° í•„ë“œê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ë¥¼ ë°©ì–´ì ìœ¼ë¡œ ë³µì‚¬í•˜ë¼
>   * ë°©ì–´ì  ë³µì‚¬ ë‹¤ìŒì—ëŠ” ë°˜ë“œì‹œ ë¶ˆë³€ì‹ ê²€ì‚¬ê°€ ë’¤ë”°ë¥´ê³ , <br>
      ê²€ì‚¬ì— ì–´ê¸‹ë‚˜ëŠ” ê²Œ ë°œê²¬ë˜ë©´ InvalidObjectExceptionì„ ë˜ì§„ë‹¤
>   * ì¬ì •ì˜(Overriding) ê°€ëŠ¥í•œ ë©”ì„œë“œëŠ” í˜¸ì¶œí•˜ì§€ ë§ì
>      - í•˜ìœ„ í´ë˜ìŠ¤ì˜ ìƒíƒœê°€ ì™„ì „íˆ ì—­ì§ë ¬í™” ë˜ê¸°ì „ì— í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ì¬ì •ì˜ëœ ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ì–´
í”„ë¡œê·¸ë¨ ì˜¤ì‘ë™ì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤


---
### Ref
- [readObject](https://madplay.github.io/post/what-is-readobject-method-and-writeobject-method)
